pipeline {
   agent any

   stages {

      stage('install req') {
        steps{
          sh 'apt-get -y install python3.11-venv'
          sh 'python3 -m venv env'
          sh 'apt-get -y install python3-pymssql'
          sh 'apt-get -y install python3-pytest'
          sh 'apt-get -y  install unixodbc-dev'
          sh 'env/bin/pip install -r requirements.txt'
        }
        }
      stage('run tests'){
        steps{
            sh 'pytest tests.py'
        }
      }

  }
}
