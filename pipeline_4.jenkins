pipeline {
   agent any

   stages {

      stage('install req') {
        steps{
        sh 'apt-get -y install python3.11-venv'
          sh 'python3 -m venv env'
          sh 'source env/bin/activate'
          sh 'apt-get -y install python3.11-pyodbc'
          sh 'apt-get -y install python3.11-pytest'
        }
        }
      stage('run tests'){
        steps{
            sh 'python3 tests.py'
        }
      }

  }
}